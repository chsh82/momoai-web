{% extends "base.html" %}

{% block title %}ê²Œì‹œíŒ ìƒì„± - í•˜í¬ë‹ˆìŠ¤{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
    <div class="mb-6">
        <a href="{{ url_for('harkness.index') }}"
           class="text-blue-600 hover:text-blue-800 font-medium mb-2 inline-block">
            â† ëª©ë¡ìœ¼ë¡œ
        </a>
        <h2 class="text-3xl font-bold text-gray-800">ê²Œì‹œíŒ ìƒì„±</h2>
    </div>

    <form method="POST" class="bg-white rounded-lg shadow p-8">
        <!-- ê²Œì‹œíŒ ìœ í˜• -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">
                ê²Œì‹œíŒ ìœ í˜• <span class="text-red-500">*</span>
            </label>
            <select name="board_type"
                    id="boardType"
                    onchange="toggleCourseSelect()"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    required>
                {% if current_user.is_admin %}
                <option value="harkness_all">í•˜í¬ë‹ˆìŠ¤ ì „ì²´ (ëª¨ë“  í•˜í¬ë‹ˆìŠ¤ í•™ìƒ)</option>
                {% endif %}
                <option value="course" {% if not current_user.is_admin %}selected{% endif %}>ìˆ˜ì—…ë³„ ê²Œì‹œíŒ</option>
            </select>
        </div>

        <!-- ìˆ˜ì—… ì„ íƒ -->
        <div id="courseSelectDiv" class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">
                ìˆ˜ì—… ì„ íƒ <span class="text-red-500">*</span>
            </label>
            <select name="course_id"
                    id="courseSelect"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="">-- ìˆ˜ì—… ì„ íƒ --</option>
                {% for course in harkness_courses %}
                <option value="{{ course.course_id }}">{{ course.course_name }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- ì œëª© -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">
                ì œëª© <span class="text-red-500">*</span>
            </label>
            <input type="text"
                   name="title"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                   placeholder="ì˜ˆ: ê¹€ì„ ìƒë‹˜ í•˜í¬ë‹ˆìŠ¤ë°˜"
                   required>
        </div>

        <!-- ì„¤ëª… -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">
                ì„¤ëª… (ì„ íƒ)
            </label>
            <textarea name="description"
                      rows="3"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="ê²Œì‹œíŒì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…"></textarea>
        </div>

        <!-- ê²Œì‹œê¸€ ì–‘ì‹ -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-3">
                ê²Œì‹œê¸€ ì–‘ì‹ <span class="text-red-500">*</span>
            </label>
            <div class="space-y-3">
                <label class="flex items-start gap-3 p-4 border border-purple-200 rounded-lg cursor-pointer hover:bg-purple-50 transition has-[:checked]:bg-purple-50 has-[:checked]:border-purple-500">
                    <input type="radio" name="post_format" value="harkness" checked
                           class="mt-1 w-4 h-4 text-purple-600 focus:ring-purple-500">
                    <div>
                        <div class="font-medium text-gray-800">ğŸ¯ í•˜í¬ë‹ˆìŠ¤ ì–‘ì‹</div>
                        <div class="text-sm text-gray-500 mt-0.5">3ê°œì˜ ì§ˆë¬¸ê³¼ ì˜ë„ë¥¼ ì‘ì„±í•˜ëŠ” í† ë¡  í˜•ì‹</div>
                    </div>
                </label>
                <label class="flex items-start gap-3 p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition has-[:checked]:bg-gray-50 has-[:checked]:border-gray-500">
                    <input type="radio" name="post_format" value="general"
                           class="mt-1 w-4 h-4 text-gray-600 focus:ring-gray-500">
                    <div>
                        <div class="font-medium text-gray-800">ğŸ“ ì¼ë°˜ ì–‘ì‹</div>
                        <div class="text-sm text-gray-500 mt-0.5">ì œëª©ê³¼ ë‚´ìš©ë§Œ ì…ë ¥í•˜ëŠ” ììœ  í˜•ì‹</div>
                    </div>
                </label>
            </div>
        </div>

        <!-- ë²„íŠ¼ -->
        <div class="flex gap-3">
            <button type="submit"
                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg transition duration-200">
                ìƒì„±í•˜ê¸°
            </button>
            <a href="{{ url_for('harkness.index') }}"
               class="flex-1 text-center bg-gray-400 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition duration-200">
                ì·¨ì†Œ
            </a>
        </div>
    </form>
</div>

<script>
function toggleCourseSelect() {
    const boardType = document.getElementById('boardType').value;
    const courseSelectDiv = document.getElementById('courseSelectDiv');
    const courseSelect = document.getElementById('courseSelect');

    if (boardType === 'course') {
        courseSelectDiv.style.display = 'block';
        courseSelect.required = true;
    } else {
        courseSelectDiv.style.display = 'none';
        courseSelect.required = false;
    }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
window.addEventListener('DOMContentLoaded', toggleCourseSelect);
</script>
{% endblock %}
