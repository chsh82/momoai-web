{% extends "base.html" %}

{% block title %}ê³µì§€ì‚¬í•­ - MOMOAI v4.0{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">
    <!-- Header -->
    <div class="mb-6">
        <h2 class="text-3xl font-bold text-gray-800">ê³µì§€ì‚¬í•­</h2>
        <p class="text-gray-600 mt-1">í•™ì›ì˜ ê³µì§€ì‚¬í•­ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>

    <!-- ê³µì§€ì‚¬í•­ ëª©ë¡ -->
    {% if announcements %}
    <div class="space-y-4">
        {% for item in announcements %}
        <div class="bg-white rounded-lg shadow hover:shadow-md transition duration-200">
            <a href="{{ url_for('parent.view_announcement', announcement_id=item.announcement.announcement_id) }}"
               class="block p-6">
                <div class="flex items-start justify-between mb-3">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-2">
                            {% if item.announcement.is_pinned %}
                            <span class="text-red-600 text-xl">ğŸ“Œ</span>
                            {% endif %}

                            <h3 class="text-xl font-medium text-gray-800 hover:text-blue-600">
                                {{ item.announcement.title }}
                            </h3>

                            {% if not item.is_read %}
                            <span class="px-2 py-1 text-xs font-bold bg-red-600 text-white rounded">NEW</span>
                            {% endif %}

                            <!-- ê³µì§€ ìœ í˜• ë°°ì§€ -->
                            <span class="px-2 py-0.5 text-xs font-medium rounded
                                {% if item.announcement.announcement_type == 'urgent' %}bg-red-100 text-red-800
                                {% elif item.announcement.announcement_type == 'event' %}bg-purple-100 text-purple-800
                                {% elif item.announcement.announcement_type == 'system' %}bg-gray-100 text-gray-800
                                {% else %}bg-blue-100 text-blue-800{% endif %}">
                                {% if item.announcement.announcement_type == 'urgent' %}ê¸´ê¸‰
                                {% elif item.announcement.announcement_type == 'event' %}í–‰ì‚¬
                                {% elif item.announcement.announcement_type == 'system' %}ì‹œìŠ¤í…œ
                                {% else %}ì¼ë°˜{% endif %}
                            </span>
                        </div>

                        <div class="flex items-center gap-3 text-sm text-gray-600">
                            <span>ğŸ“… {{ item.announcement.created_at.strftime('%Yë…„ %mì›” %dì¼') }}</span>
                            <span>ğŸ‘¤ {{ item.announcement.author.name if item.announcement.author else 'ê´€ë¦¬ì' }}</span>
                            <span>ğŸ‘ï¸ {{ item.announcement.view_count }}íšŒ ì¡°íšŒ</span>
                        </div>
                    </div>
                </div>

                {% if item.announcement.content %}
                <div class="bg-gray-50 rounded-lg p-4 mt-3">
                    <p class="text-sm text-gray-700 line-clamp-2">
                        {{ item.announcement.content[:200] }}{% if item.announcement.content|length > 200 %}...{% endif %}
                    </p>
                </div>
                {% endif %}
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="bg-white rounded-lg shadow p-12 text-center">
        <div class="text-6xl mb-4">ğŸ“¢</div>
        <h3 class="text-xl font-medium text-gray-800 mb-2">ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</h3>
        <p class="text-gray-600">ì•„ì§ ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
