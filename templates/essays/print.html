<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ essay.title or student.name + 'ì˜ ê³¼ì œ' }} - ì²¨ì‚­ ê²°ê³¼</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- í•œê¸€ í°íŠ¸ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }

        @media print {
            @page {
                margin: 2cm;
            }

            body {
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }

            /* ì¸ì‡„ ì‹œ í˜ì´ì§€ ë‚˜ëˆ„ê¸° ë°©ì§€ */
            .no-break {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-white p-8">
    <!-- í—¤ë” ì •ë³´ -->
    <div class="mb-8 pb-4 border-b-2 border-gray-300 no-break">
        <h1 class="text-3xl font-bold text-gray-800 mb-3">
            {{ essay.title or student.name + 'ì˜ ê³¼ì œ' }}
        </h1>
        <div class="flex items-center gap-4 text-sm text-gray-600">
            <span>ğŸ‘¤ {{ student.name }} ({{ student.grade }})</span>
            <span>ğŸ‘¨â€ğŸ« {{ essay.user.name }} ê°•ì‚¬</span>
            <span>ğŸ“… {{ essay.created_at.strftime('%Yë…„ %mì›” %dì¼') }}</span>
            {% if essay.completed_at %}
            <span>âœ… ì™„ë£Œ: {{ essay.completed_at.strftime('%Yë…„ %mì›” %dì¼') }}</span>
            {% endif %}
        </div>
    </div>

    <!-- ì²¨ì‚­ ê²°ê³¼ ë‚´ìš© -->
    <div class="essay-content">
        {{ html_content|safe }}
    </div>

    <!-- ìë™ ì¸ì‡„ -->
    <script>
        // í˜ì´ì§€ ë¡œë“œ í›„ ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì í‘œì‹œ
        window.onload = function() {
            setTimeout(function() {
                window.print();
            }, 500);
        };

        // ì¸ì‡„ í›„ ì°½ ë‹«ê¸° (ì‚¬ìš©ìê°€ ì·¨ì†Œí•˜ê±°ë‚˜ ì¸ì‡„ ì™„ë£Œ ì‹œ)
        window.onafterprint = function() {
            // ì‚¬ìš©ìì—ê²Œ í™•ì¸ í›„ ì°½ ë‹«ê¸°
            setTimeout(function() {
                if (confirm('ì¸ì‡„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆê¹Œ? ì´ ì°½ì„ ë‹«ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    window.close();
                }
            }, 100);
        };
    </script>
</body>
</html>
