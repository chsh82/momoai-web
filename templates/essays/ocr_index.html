{% extends "base.html" %}

{% block title %}OCR ì¸ì‹ - MOMOAI v4.0{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    <!-- Header -->
    <div class="mb-6">
        <a href="{{ url_for('essays.index') }}"
           class="text-blue-600 hover:text-blue-800 font-medium mb-2 inline-block">
            â† ì²¨ì‚­ ê´€ë¦¬ë¡œ
        </a>
        <h2 class="text-3xl font-bold text-gray-800 mb-2">OCR ì¸ì‹</h2>
        <p class="text-gray-600">ì´ë¯¸ì§€ íŒŒì¼ì—ì„œ í•œê¸€ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤</p>
    </div>

    <!-- ì•¡ì…˜ ì¹´ë“œ -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        <!-- ì§ì ‘ ì—…ë¡œë“œ -->
        <a href="{{ url_for('essays.ocr_upload') }}"
           class="bg-white rounded-lg shadow-lg p-8 hover:shadow-xl transition duration-200 cursor-pointer border-2 border-transparent hover:border-blue-500">
            <div class="text-center">
                <div class="text-6xl mb-4">ğŸ“¸</div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">ì§ì ‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ</h3>
                <p class="text-gray-600 text-sm">ì´ë¯¸ì§€ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤</p>
            </div>
        </a>

        <!-- íˆìŠ¤í† ë¦¬ ë³´ê¸° -->
        <a href="{{ url_for('essays.ocr_history') }}"
           class="bg-white rounded-lg shadow-lg p-8 hover:shadow-xl transition duration-200 cursor-pointer border-2 border-transparent hover:border-green-500">
            <div class="text-center">
                <div class="text-6xl mb-4">ğŸ“‹</div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">OCR íˆìŠ¤í† ë¦¬</h3>
                <p class="text-gray-600 text-sm">ê³¼ê±° OCR ì¸ì‹ ê¸°ë¡ì„ ëª¨ë‘ í™•ì¸í•©ë‹ˆë‹¤</p>
            </div>
        </a>
    </div>

    <!-- ìµœê·¼ íˆìŠ¤í† ë¦¬ -->
    {% if recent_history %}
    <div class="bg-white rounded-lg shadow">
        <div class="px-6 py-4 border-b border-gray-200">
            <h3 class="text-xl font-bold text-gray-800">ìµœê·¼ OCR ê¸°ë¡</h3>
        </div>
        <div class="p-6">
            <div class="space-y-3">
                {% for record in recent_history %}
                <a href="{{ url_for('essays.ocr_result', ocr_id=record.ocr_id) }}"
                   class="block border border-gray-200 rounded-lg p-4 hover:border-blue-400 hover:bg-blue-50 transition duration-200">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-2xl">ğŸ–¼ï¸</span>
                                <h4 class="text-lg font-medium text-gray-800">{{ record.original_filename }}</h4>
                                {% if record.essay %}
                                <span class="px-2 py-0.5 text-xs font-medium bg-purple-100 text-purple-800 rounded">
                                    ê³¼ì œì—ì„œ
                                </span>
                                {% endif %}
                            </div>
                            <div class="text-sm text-gray-600 mb-2">
                                ğŸ“… {{ record.created_at.strftime('%Y-%m-%d %H:%M') }}
                                | â±ï¸ {{ "%.2f"|format(record.processing_time) }}ì´ˆ
                                | ğŸ“ {{ record.character_count }}ì
                            </div>
                            <div class="text-sm text-gray-500 line-clamp-2">
                                {{ record.extracted_text[:100] }}{% if record.extracted_text|length > 100 %}...{% endif %}
                            </div>
                        </div>
                        <span class="ml-4 text-blue-600 font-medium whitespace-nowrap">
                            ë³´ê¸° â†’
                        </span>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
    </div>
    {% else %}
    <div class="bg-white rounded-lg shadow p-12 text-center">
        <div class="text-6xl mb-4">ğŸ“­</div>
        <h3 class="text-xl font-bold text-gray-800 mb-2">OCR ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</h3>
        <p class="text-gray-600 mb-6">ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì—¬ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•´ë³´ì„¸ìš”</p>
        <a href="{{ url_for('essays.ocr_upload') }}"
           class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-3 rounded-lg transition duration-200">
            ì´ë¯¸ì§€ ì—…ë¡œë“œí•˜ê¸°
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
