{% extends "base.html" %}

{% block title %}í´ë˜ìŠ¤ ê²Œì‹œíŒ - MOMOAI v4.0{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">
    <!-- Header -->
    <div class="mb-6">
        <h2 class="text-3xl font-bold text-gray-800">í´ë˜ìŠ¤ ê²Œì‹œíŒ</h2>
        <p class="text-gray-600 mt-1">ë‹´ë‹¹ ìˆ˜ì—…ì˜ ê²Œì‹œíŒì„ ê´€ë¦¬í•˜ì„¸ìš”.</p>
    </div>

    <!-- ìˆ˜ì—… ëª©ë¡ -->
    {% if courses_with_stats %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for item in courses_with_stats %}
        <div class="bg-white rounded-lg shadow hover:shadow-md transition duration-200">
            <a href="{{ url_for('teacher.class_board_posts', course_id=item.course.course_id) }}"
               class="block p-6">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-lg font-bold text-gray-800 hover:text-blue-600">
                        {{ item.course.course_name }}
                    </h3>
                    <span class="px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-full">
                        {{ item.post_count }}ê°œ
                    </span>
                </div>

                <div class="text-sm text-gray-600 mb-3">
                    <p>ğŸ‘¥ í•™ìƒ {{ item.course.enrolled_count }}ëª…</p>
                    <p>ğŸ“… {{ item.course.weekday_korean }} {{ item.course.start_time.strftime('%H:%M') }}</p>
                </div>

                {% if item.latest_post %}
                <div class="bg-gray-50 rounded p-3 mt-3">
                    <p class="text-xs text-gray-500 mb-1">ìµœê·¼ ê²Œì‹œê¸€</p>
                    <p class="text-sm text-gray-700 truncate">{{ item.latest_post.title }}</p>
                    <p class="text-xs text-gray-500 mt-1">
                        {{ item.latest_post.author.name }} Â· {{ item.latest_post.created_at.strftime('%m/%d %H:%M') }}
                    </p>
                </div>
                {% else %}
                <div class="bg-gray-50 rounded p-3 mt-3 text-center">
                    <p class="text-sm text-gray-500">ì•„ì§ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤</p>
                </div>
                {% endif %}
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="bg-white rounded-lg shadow p-12 text-center">
        <div class="text-6xl mb-4">ğŸ“š</div>
        <h3 class="text-xl font-medium text-gray-800 mb-2">ë‹´ë‹¹ ìˆ˜ì—…ì´ ì—†ìŠµë‹ˆë‹¤</h3>
        <p class="text-gray-600">ìˆ˜ì—…ì´ ë°°ì •ë˜ë©´ í´ë˜ìŠ¤ ê²Œì‹œíŒì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
