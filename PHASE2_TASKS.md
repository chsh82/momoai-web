# 📋 Phase 2: 고급 분석 & 히스토리 작업 목록

**목표**: 학생별 성장 추이 분석 및 데이터 시각화

**예상 기간**: 3-4주 (빠르게 진행 중)

---

## 🎯 Phase 2 핵심 목표

1. 첨삭 결과에서 점수 자동 파싱
2. 학생별 성장 그래프 표시
3. Chart.js를 통한 데이터 시각화
4. 18개 지표 레이더 차트
5. 첨삭 히스토리 고도화

---

## ✅ 작업 체크리스트

### 📊 1. 점수 파싱 시스템 (우선순위: 높음) ✅

#### 1.1 점수 파서 개발 ✅
- [x] HTML 파싱 함수 작성
- [x] 18개 지표 점수 추출
- [x] 총점 추출
- [x] 최종 등급 추출
- [x] EssayScore 테이블에 저장

#### 1.2 점수 파싱 통합 ✅
- [x] MOMOAIService에 파싱 로직 추가
- [x] 첨삭 완료 시 자동 파싱
- [ ] 기존 첨삭에 대한 재파싱 기능

#### 1.3 테스트 ✅
- [x] 점수 파싱 테스트 스크립트
- [x] 다양한 HTML 포맷 테스트
- [x] 에러 처리 테스트

---

### 📈 2. Chart.js 연동 (우선순위: 높음) ✅

#### 2.1 Chart.js 설치 ✅
- [x] CDN 추가 또는 npm 설치
- [x] base.html에 스크립트 추가

#### 2.2 기본 차트 컴포넌트 (진행 중)
- [x] 라인 차트 (시간별 점수 변화)
- [x] 레이더 차트 (18개 지표)
- [ ] 바 차트 (학생별 비교)

#### 2.3 차트 스타일링 ✅
- [x] 색상 테마 설정
- [x] 반응형 디자인
- [x] 툴팁 커스터마이징

---

### 👤 3. 학생 상세 페이지 개선 (우선순위: 높음) (진행 중)

#### 3.1 성장 추이 그래프 ✅
- [x] 총점 변화 라인 차트
- [x] 최근 5개 첨삭 점수 표시
- [x] 평균 점수 계산 및 표시

#### 3.2 18개 지표 레이더 차트 ✅
- [x] 최신 첨삭의 18개 지표 시각화
- [x] 사고유형 9개 vs 통합지표 9개 분리 표시
- [x] 강점/약점 분석 텍스트

#### 3.3 첨삭 이력 개선
- [ ] 점수 포함하여 표시
- [ ] 등급 배지 추가
- [ ] 상세 비교 링크

---

### 📋 4. 첨삭 히스토리 페이지 (우선순위: 중간)

#### 4.1 필터링 기능
- [ ] 학생별 필터
- [ ] 날짜 범위 필터
- [ ] 등급별 필터
- [ ] 상태별 필터

#### 4.2 검색 기능
- [ ] 제목 검색
- [ ] 학생 이름 검색
- [ ] 전체 텍스트 검색

#### 4.3 정렬 기능
- [ ] 날짜순
- [ ] 점수순
- [ ] 학생 이름순

#### 4.4 페이지네이션
- [ ] 페이지당 10/20/50개
- [ ] 페이지 네비게이션

---

### 📊 5. 대시보드 차트 추가 (우선순위: 중간)

#### 5.1 월별 첨삭 수 그래프
- [ ] 최근 6개월 데이터
- [ ] 바 차트로 표시
- [ ] 전월 대비 증감률

#### 5.2 평균 점수 추이
- [ ] 최근 10개 첨삭 평균 점수
- [ ] 라인 차트로 표시

#### 5.3 학생별 평균 점수
- [ ] Top 5 학생 평균 점수
- [ ] 바 차트로 표시

#### 5.4 지표별 평균 점수
- [ ] 18개 지표별 평균
- [ ] 레이더 차트로 표시
- [ ] 강점/약점 영역 하이라이트

---

### 🔄 6. 버전 비교 기능 (우선순위: 낮음)

#### 6.1 버전 비교 UI
- [ ] 2개 버전 선택 인터페이스
- [ ] Side-by-side 비교 레이아웃

#### 6.2 점수 비교
- [ ] 점수 차이 계산
- [ ] 개선/악화 표시
- [ ] 차이 하이라이트

#### 6.3 내용 비교
- [ ] HTML diff 표시
- [ ] 변경 사항 하이라이트

---

### 📱 7. 추가 기능 (우선순위: 낮음)

#### 7.1 통계 API
- [ ] 학생별 통계 API
- [ ] 기간별 통계 API
- [ ] 지표별 통계 API

#### 7.2 Excel 내보내기
- [ ] 첨삭 목록 Excel 다운로드
- [ ] 학생별 리포트 Excel
- [ ] 점수 데이터 Excel

#### 7.3 프린트 최적화
- [ ] 첨삭 결과 프린트 CSS
- [ ] 학생 리포트 프린트 CSS

---

## 🚀 시작 순서 (우선순위 기반)

### Week 1: 점수 파싱 + Chart.js 기초
1. 점수 파서 개발
2. EssayScore 테이블에 저장
3. Chart.js CDN 추가
4. 기본 차트 컴포넌트 작성

### Week 2: 학생 상세 페이지 개선
5. 성장 추이 라인 차트
6. 18개 지표 레이더 차트
7. 첨삭 이력에 점수 표시

### Week 3: 대시보드 차트 + 히스토리
8. 대시보드에 월별 차트 추가
9. 평균 점수 추이 차트
10. 첨삭 히스토리 필터링

### Week 4: 버전 비교 + 최적화
11. 버전 비교 기능
12. 성능 최적화
13. 테스트 및 버그 수정

---

## 📊 예상 차트 목록

### 학생 상세 페이지
1. **총점 변화 라인 차트**
   - X축: 첨삭 날짜
   - Y축: 총점 (0-100)
   - 평균선 표시

2. **18개 지표 레이더 차트**
   - 사고유형 9개 (빨간색)
   - 통합지표 9개 (파란색)
   - 0-10 스케일

### 대시보드
3. **월별 첨삭 수 바 차트**
   - X축: 월 (최근 6개월)
   - Y축: 첨삭 수

4. **평균 점수 추이 라인 차트**
   - X축: 첨삭 순서
   - Y축: 평균 점수

5. **학생별 평균 점수 바 차트**
   - X축: 학생 이름
   - Y축: 평균 점수

---

## 🎨 18개 지표 목록

### 사고유형 (9개)
1. 요약
2. 비교
3. 적용
4. 분석
5. 평가
6. 비판
7. 창의
8. 문제해결
9. 의사결정

### 통합지표 (9개)
1. 이해도
2. 논리성
3. 창의성
4. 비판적사고
5. 깊이
6. 정확성
7. 표현력
8. 구성력
9. 완성도

---

## 📝 데이터 구조

### EssayScore 테이블
```python
essay_id        # FK
version_id      # FK
category        # '사고유형' or '통합지표'
indicator_name  # 지표 이름
score           # 0.0 - 10.0
```

### 점수 파싱 예시
```python
{
    'total_score': 85.5,
    'final_grade': 'A',
    'scores': {
        '사고유형': {
            '요약': 8.5,
            '비교': 7.0,
            ...
        },
        '통합지표': {
            '이해도': 9.0,
            '논리성': 8.5,
            ...
        }
    }
}
```

---

## 🔜 다음 단계

**가장 먼저 시작할 작업:**
1. HTML에서 점수 파싱하기
2. EssayScore 테이블에 저장하기
3. Chart.js CDN 추가
4. 학생 상세 페이지에 첫 차트 추가

---

**작성일**: 2026-02-06
**최종 수정일**: 2026-02-06
**시작**: Phase 2 Week 1
